# DM-This

DM-This uses AI to give players a classic D&D like adventure gaming experience using pre-existing adventure modules and
rules provided as PDF documents. Using this source material, DM-This plays the role of DM (Dungeon Master), NPCs
(Non-Player Characters), and other player characters (to fill out a party of adventurers). As the DM, DM-This generates
scene setting visuals and combat battle maps as needed. One or more players can participate in a session via a text chat
style interface and by moving their character tokens on the battle map during combat.

## Architecture

DM-This is implemented as a NodeJS service that provides UI via a web browser. 

The project is currently in a prototyping stage. The service only operates a single game session at a time. The source
materials (game rules, adventure module, and player character sheets) are provided as static files in project
subdirectories:

* **./content/rules/(rule-set-id)/** - contains rule PDFs. The service will support multiple rule sets and the rule
  set to be used is identified by the module.yaml file in the ./content/module/(module-id)/ folder.

* **./content/modules/(module-id)/** - contains PDFs for the adventure module being run.

* **./content/campaigns/(campaign-id)/** - contains files that represent current state of a campaign. A campaign.json
  file identifies the module and rules used for the campaign and the player characters that are participating in the
  campaign. A campaign-journal.md file is generated by DM-This to record the history and current status of the campaign.
  Both character-stats-(character-name).md and character-journal-(character-name).md files also maintained for each
  player and non-player character. The character-(character-name)-stats.md file contains the character's current status,
  inventory, and backstory, while the character-(character-name)-journal.md contains a history of the character's
  actions during the campaign and a description of their current goals or intent. This directory also contains
  character-token-(character-name).png and character-portrait-(character-name).png, which are used to represent the
  player on a battle map and elsewhere in the UI, respectively.

## campaign.json

This file contains a JSON format object with the following properties:

- **module** - name of the content/module subdirectory used for this campaign
- **rules** - name of the content/rules subdirectory used for this campaign
- **characters** - array of character objects, which have the following properties:
  - **name** - the character's name (identifies the character related files described above)

### module.yaml

This file contains the following properties:

* **rule-set-id** - identifies the rule set used for this module

### campaign-journal.md

This file is subdivided by campaign day and event. For example:

    # Day 1
    ## The Party Meets
    For various reasons, they all ended up in the same common room for dinner. When Rolf and John (NPCs)
    start fighting, Blageron and Forth (players) intervene, holding Rolf and John apart. Simone (player)
    gets Rolf and John to talk, describing what has them riled up. It seems Rolf had promised John some
    help in exploring an old ruin John found nearby. But now Rolf is backing out because he heard there
    were ancient skeletons guarding some tombs there. After some discussion, John agrees to show the 
    party the location of the ruins as long has he gets a cut of anything they find there.
    ## Ambush on the way to the ruins
    As the party nears the ruins, lead by John, they are ambushed by three ... (etc.)
    ## Making camp
    The party makes camp outside the ruins, ready to adventure forth the next day.
    # Day 2
    The party discovers the door that appeared to be an entry way to the ruins is a fake. They search the
    area trying to find another way in. After a while, Blageron notices a strange seam in the rock wall
    near the fake door and is able to pry at it to reveal a hidden entrance.
    (and so on)

### character-stats-(character-name).md

This file is structured as described below. 

    # (character name)
    (character description)
    # Backstory
    (a description of the character's history, motivations, etc.)
    # Stats
    Strength: NN
    etc. (whatever stats the rule system uses)
    # Equipped
    Leather Armor
    Short Sword
    etc. (whatever the character has when starting a campaign)
    # Inventory
    Bedroll
    Rations x 3
    etc. (whatever the character is carrying or otherwise has available for use)

### character-journal-(character-name).md

This file describes the character's actions during the campaign. For DM-This run characters, it is used to determine
what the character's action will be in a given situation, and records those actions. For player run characters, it is
generated by DM-This based on the player's chat messages and combat actions, and is used by DM-This to predict the
player's likely response to possible actions taken as a DM. This file is subdivided by day and event, just as the
campaign-journal.md file is. For example, Blageron's journal could contain:

    # Day 1
    ## A fight over dinner
    While eating dinner in a common room in town, a couple of young townfolk, Rolf and John, get into a fight. Turns
    out John found some ruins and wanted Rolf to go exploring with him but Rolf was scared off by stories of tombs 
    with skeleton guards. Blageron helps calm things down, then decides to go with John to explore the ruins himself. 
    Forth and Simone, who were also in the common room, join up with him and John and set out.
    ## Journey to the ruins
    Blageron and the rest of the party are ambushed near the ruins... (etc.)
